<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Generated by Caltrop Parser version 1.2 -->
<Actor name="sequence">
    <Port kind="Input" name="DATA">
        <Type name="int"/>
    </Port>
    <Port kind="Input" name="BUF">
        <Type name="int"/>
    </Port>
    <Port kind="Output" name="A">
        <Type name="int"/>
    </Port>
    <Port kind="Output" name="B">
        <Type name="int"/>
    </Port>
    <Port kind="Output" name="C">
        <Type name="int"/>
    </Port>
    <Decl kind="Variable" name="mb_x" assignable="Yes">
        <Type name="int"/>
    </Decl>
    <Decl kind="Variable" name="mb_y" assignable="Yes">
        <Type name="int"/>
    </Decl>
    <Decl kind="Variable" name="mb_seq" assignable="Yes">
        <Type name="List">
            <Entry kind="Type">
                <Type name="int"/>
            </Entry>
        </Type>
    </Decl>
    <Decl kind="Variable" name="mb_x_last" assignable="Yes">
        <Type name="int"/>
    </Decl>
    <Decl kind="Variable" name="mb_y_last" assignable="Yes">
        <Type name="int"/>
    </Decl>
    <Decl kind="Variable" name="mb_seq_last" assignable="Yes">
        <Type name="List">
            <Entry kind="Type">
                <Type name="int"/>
            </Entry>
        </Type>
    </Decl>
    <Decl kind="Variable" name="block_count" assignable="Yes">
        <Type name="int"/>
        <Expr kind="Literal" literal-kind="Integer" value="0"/>
    </Decl>
    <Decl kind="Variable" name="buf_x" assignable="Yes">
        <Type name="int"/>
    </Decl>
    <Decl kind="Variable" name="buf_y" assignable="Yes">
        <Type name="int"/>
    </Decl>
    <Decl kind="Variable" name="buf_seq" assignable="Yes">
        <Type name="List">
            <Entry kind="Type">
                <Type name="int"/>
            </Entry>
        </Type>
    </Decl>
    <Decl kind="Variable" name="buf_x_last" assignable="Yes">
        <Type name="int"/>
    </Decl>
    <Decl kind="Variable" name="buf_y_last" assignable="Yes">
        <Type name="int"/>
    </Decl>
    <Decl kind="Variable" name="buf_seq_last" assignable="Yes">
        <Type name="List">
            <Entry kind="Type">
                <Type name="int"/>
            </Entry>
        </Type>
    </Decl>
    <Decl kind="Variable" name="buf_x_next" assignable="Yes">
        <Type name="int"/>
    </Decl>
    <Decl kind="Variable" name="buf_y_next" assignable="Yes">
        <Type name="int"/>
    </Decl>
    <Decl kind="Variable" name="buf_seq_next" assignable="Yes">
        <Type name="List">
            <Entry kind="Type">
                <Type name="int"/>
            </Entry>
        </Type>
    </Decl>
    <Decl kind="Variable" name="buf_count" assignable="Yes">
        <Type name="int"/>
        <Expr kind="Literal" literal-kind="Integer" value="0"/>
    </Decl>
    <Decl kind="Variable" name="buf_eof" assignable="Yes">
        <Type name="int"/>
    </Decl>
    <Decl kind="Variable" name="this_n" assignable="Yes">
        <Type name="int"/>
    </Decl>
    <Action text-begin-line="35" text-begin-col="14" text-end-line="43" text-end-col="3">
        <QID name="flush_buf">
            <ID name="flush_buf"/>
        </QID>
        <Input kind="Elements" port="BUF">
            <Decl kind="Input" name="type"/>
            <Decl kind="Input" name="x"/>
            <Decl kind="Input" name="y"/>
            <Decl kind="Input" name="n"/>
        </Input>
        <Guards>
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="buf_count"/>
                <Op name="&lt;"/>
                <Expr kind="Var" name="block_count"/>
            </Expr>
        </Guards>
        <Stmt kind="If">
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="type"/>
                <Op name="!="/>
                <Expr kind="Literal" literal-kind="Integer" value="1"/>
            </Expr>
            <Stmt kind="Block">
                <Stmt kind="Assign" name="buf_count">
                    <Expr kind="BinOpSeq">
                        <Expr kind="Var" name="buf_count"/>
                        <Op name="+"/>
                        <Expr kind="Literal" literal-kind="Integer" value="1"/>
                    </Expr>
                </Stmt>
            </Stmt>
        </Stmt>
    </Action>
    <Action text-begin-line="45" text-begin-col="16" text-end-line="68" text-end-col="3">
        <QID name="reset_actor">
            <ID name="reset_actor"/>
        </QID>
        <Guards>
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="buf_count"/>
                <Op name="="/>
                <Expr kind="Var" name="block_count"/>
            </Expr>
        </Guards>
        <Stmt kind="Assign" name="block_count">
            <Expr kind="Literal" literal-kind="Integer" value="0"/>
        </Stmt>
        <Stmt kind="Assign" name="mb_x">
            <Expr kind="UnaryOp">
                <Op name="-"/>
                <Expr kind="Literal" literal-kind="Integer" value="1"/>
            </Expr>
        </Stmt>
        <Stmt kind="Assign" name="mb_y">
            <Expr kind="UnaryOp">
                <Op name="-"/>
                <Expr kind="Literal" literal-kind="Integer" value="1"/>
            </Expr>
        </Stmt>
        <Stmt kind="Assign" name="mb_x_last">
            <Expr kind="UnaryOp">
                <Op name="-"/>
                <Expr kind="Literal" literal-kind="Integer" value="1"/>
            </Expr>
        </Stmt>
        <Stmt kind="Assign" name="mb_y_last">
            <Expr kind="UnaryOp">
                <Op name="-"/>
                <Expr kind="Literal" literal-kind="Integer" value="1"/>
            </Expr>
        </Stmt>
        <Stmt kind="Assign" name="mb_seq">
            <Expr kind="List">
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
            </Expr>
        </Stmt>
        <Stmt kind="Assign" name="buf_count">
            <Expr kind="Literal" literal-kind="Integer" value="0"/>
        </Stmt>
        <Stmt kind="Assign" name="buf_x">
            <Expr kind="UnaryOp">
                <Op name="-"/>
                <Expr kind="Literal" literal-kind="Integer" value="1"/>
            </Expr>
        </Stmt>
        <Stmt kind="Assign" name="buf_y">
            <Expr kind="UnaryOp">
                <Op name="-"/>
                <Expr kind="Literal" literal-kind="Integer" value="1"/>
            </Expr>
        </Stmt>
        <Stmt kind="Assign" name="buf_x_last">
            <Expr kind="UnaryOp">
                <Op name="-"/>
                <Expr kind="Literal" literal-kind="Integer" value="1"/>
            </Expr>
        </Stmt>
        <Stmt kind="Assign" name="buf_y_last">
            <Expr kind="UnaryOp">
                <Op name="-"/>
                <Expr kind="Literal" literal-kind="Integer" value="1"/>
            </Expr>
        </Stmt>
        <Stmt kind="Assign" name="buf_x_next">
            <Expr kind="UnaryOp">
                <Op name="-"/>
                <Expr kind="Literal" literal-kind="Integer" value="1"/>
            </Expr>
        </Stmt>
        <Stmt kind="Assign" name="buf_y_next">
            <Expr kind="UnaryOp">
                <Op name="-"/>
                <Expr kind="Literal" literal-kind="Integer" value="1"/>
            </Expr>
        </Stmt>
        <Stmt kind="Assign" name="buf_seq">
            <Expr kind="List">
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
            </Expr>
        </Stmt>
        <Stmt kind="Assign" name="buf_seq_next">
            <Expr kind="List">
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
            </Expr>
        </Stmt>
        <Stmt kind="Assign" name="buf_eof">
            <Expr kind="Literal" literal-kind="Integer" value="0"/>
        </Stmt>
    </Action>
    <Action text-begin-line="70" text-begin-col="15" text-end-line="75" text-end-col="3">
        <QID name="eof_detect">
            <ID name="eof_detect"/>
        </QID>
        <Input kind="Elements" port="DATA">
            <Decl kind="Input" name="type"/>
            <Decl kind="Input" name="x"/>
            <Decl kind="Input" name="y"/>
            <Decl kind="Input" name="n"/>
        </Input>
        <Guards>
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="type"/>
                <Op name="&lt;"/>
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
            </Expr>
        </Guards>
        <Stmt kind="Assign" name="block_count">
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="block_count"/>
                <Op name="+"/>
                <Expr kind="Literal" literal-kind="Integer" value="1"/>
            </Expr>
        </Stmt>
    </Action>
    <Action text-begin-line="77" text-begin-col="18" text-end-line="80" text-end-col="3">
        <QID name="discard_block">
            <ID name="discard_block"/>
        </QID>
        <Input kind="Elements" port="DATA">
            <Decl kind="Input" name="type"/>
            <Decl kind="Input" name="x"/>
            <Decl kind="Input" name="y"/>
            <Decl kind="Input" name="n"/>
        </Input>
        <Guards>
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="type"/>
                <Op name="="/>
                <Expr kind="Literal" literal-kind="Integer" value="1"/>
            </Expr>
        </Guards>
    </Action>
    <Action text-begin-line="82" text-begin-col="15" text-end-line="98" text-end-col="3">
        <QID name="read_block">
            <ID name="read_block"/>
        </QID>
        <Input kind="Elements" port="DATA">
            <Decl kind="Input" name="type"/>
            <Decl kind="Input" name="x"/>
            <Decl kind="Input" name="y"/>
            <Decl kind="Input" name="n"/>
        </Input>
        <Guards>
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="type"/>
                <Op name="="/>
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
            </Expr>
        </Guards>
        <Stmt kind="Assign" name="block_count">
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="block_count"/>
                <Op name="+"/>
                <Expr kind="Literal" literal-kind="Integer" value="1"/>
            </Expr>
        </Stmt>
        <Stmt kind="If">
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="x"/>
                <Op name="!="/>
                <Expr kind="Var" name="mb_x"/>
                <Op name="or"/>
                <Expr kind="Var" name="y"/>
                <Op name="!="/>
                <Expr kind="Var" name="mb_y"/>
            </Expr>
            <Stmt kind="Block">
                <Stmt kind="Assign" name="mb_x_last">
                    <Expr kind="Var" name="mb_x"/>
                </Stmt>
                <Stmt kind="Assign" name="mb_y_last">
                    <Expr kind="Var" name="mb_y"/>
                </Stmt>
                <Stmt kind="Assign" name="mb_seq_last">
                    <Expr kind="Var" name="mb_seq"/>
                </Stmt>
                <Stmt kind="Assign" name="mb_x">
                    <Expr kind="Var" name="x"/>
                </Stmt>
                <Stmt kind="Assign" name="mb_y">
                    <Expr kind="Var" name="y"/>
                </Stmt>
                <Stmt kind="Assign" name="mb_seq">
                    <Expr kind="List">
                        <Expr kind="Literal" literal-kind="Integer" value="0"/>
                        <Expr kind="Literal" literal-kind="Integer" value="0"/>
                        <Expr kind="Literal" literal-kind="Integer" value="0"/>
                        <Expr kind="Literal" literal-kind="Integer" value="0"/>
                        <Expr kind="Literal" literal-kind="Integer" value="0"/>
                        <Expr kind="Literal" literal-kind="Integer" value="0"/>
                    </Expr>
                </Stmt>
            </Stmt>
        </Stmt>
        <Stmt kind="Call">
            <Expr kind="Entry" name="set">
                <Expr kind="Var" name="mb_seq"/>
            </Expr>
            <Args>
                <Expr kind="Var" name="n"/>
                <Expr kind="Var" name="block_count"/>
            </Args>
        </Stmt>
        <Stmt kind="Assign" name="this_n">
            <Expr kind="Var" name="n"/>
        </Stmt>
    </Action>
    <Decl kind="Variable" name="keep_reading_buf">
        <Type kind="Function" infer="true"/>
        <Expr kind="Lambda">
            <Decl kind="Parameter" name="bxnext"/>
            <Decl kind="Parameter" name="bynext"/>
            <Decl kind="Parameter" name="bx"/>
            <Decl kind="Parameter" name="by"/>
            <Decl kind="Parameter" name="mbx"/>
            <Decl kind="Parameter" name="mby"/>
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="bynext"/>
                <Op name="&lt;"/>
                <Expr kind="BinOpSeq">
                    <Expr kind="Var" name="mby"/>
                    <Op name="-"/>
                    <Expr kind="Literal" literal-kind="Integer" value="1"/>
                </Expr>
                <Op name="or"/>
                <Expr kind="BinOpSeq">
                    <Expr kind="Var" name="bynext"/>
                    <Op name="="/>
                    <Expr kind="BinOpSeq">
                        <Expr kind="Var" name="mby"/>
                        <Op name="-"/>
                        <Expr kind="Literal" literal-kind="Integer" value="1"/>
                    </Expr>
                    <Op name="and"/>
                    <Expr kind="Var" name="bxnext"/>
                    <Op name="&lt;="/>
                    <Expr kind="Var" name="mbx"/>
                </Expr>
                <Op name="or"/>
                <Expr kind="Var" name="by"/>
                <Op name="&lt;"/>
                <Expr kind="BinOpSeq">
                    <Expr kind="Var" name="mby"/>
                    <Op name="-"/>
                    <Expr kind="Literal" literal-kind="Integer" value="1"/>
                </Expr>
                <Op name="or"/>
                <Expr kind="BinOpSeq">
                    <Expr kind="Var" name="by"/>
                    <Op name="="/>
                    <Expr kind="BinOpSeq">
                        <Expr kind="Var" name="mby"/>
                        <Op name="-"/>
                        <Expr kind="Literal" literal-kind="Integer" value="1"/>
                    </Expr>
                    <Op name="and"/>
                    <Expr kind="Var" name="bx"/>
                    <Op name="&lt;"/>
                    <Expr kind="Var" name="mbx"/>
                </Expr>
            </Expr>
        </Expr>
    </Decl>
    <Action text-begin-line="109" text-begin-col="19" text-end-line="134" text-end-col="3">
        <QID name="read_buf.block">
            <ID name="read_buf"/>
            <ID name="block"/>
        </QID>
        <Input kind="Elements" port="BUF">
            <Decl kind="Input" name="type"/>
            <Decl kind="Input" name="x"/>
            <Decl kind="Input" name="y"/>
            <Decl kind="Input" name="n"/>
        </Input>
        <Guards>
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="buf_eof"/>
                <Op name="="/>
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
            </Expr>
            <Expr kind="Application">
                <Expr kind="Var" name="keep_reading_buf"/>
                <Args>
                    <Expr kind="Var" name="buf_x_next"/>
                    <Expr kind="Var" name="buf_y_next"/>
                    <Expr kind="Var" name="buf_x"/>
                    <Expr kind="Var" name="buf_y"/>
                    <Expr kind="Var" name="mb_x"/>
                    <Expr kind="Var" name="mb_y"/>
                </Args>
            </Expr>
        </Guards>
        <Stmt kind="If">
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="type"/>
                <Op name="!="/>
                <Expr kind="Literal" literal-kind="Integer" value="1"/>
            </Expr>
            <Stmt kind="Block">
                <Stmt kind="Assign" name="buf_count">
                    <Expr kind="BinOpSeq">
                        <Expr kind="Var" name="buf_count"/>
                        <Op name="+"/>
                        <Expr kind="Literal" literal-kind="Integer" value="1"/>
                    </Expr>
                </Stmt>
                <Stmt kind="If">
                    <Expr kind="BinOpSeq">
                        <Expr kind="Var" name="x"/>
                        <Op name="!="/>
                        <Expr kind="Var" name="buf_x_next"/>
                        <Op name="or"/>
                        <Expr kind="Var" name="y"/>
                        <Op name="!="/>
                        <Expr kind="Var" name="buf_y_next"/>
                    </Expr>
                    <Stmt kind="Block">
                        <Stmt kind="Assign" name="buf_x_last">
                            <Expr kind="Var" name="buf_x"/>
                        </Stmt>
                        <Stmt kind="Assign" name="buf_y_last">
                            <Expr kind="Var" name="buf_y"/>
                        </Stmt>
                        <Stmt kind="Assign" name="buf_seq_last">
                            <Expr kind="Var" name="buf_seq"/>
                        </Stmt>
                        <Stmt kind="Assign" name="buf_x">
                            <Expr kind="Var" name="buf_x_next"/>
                        </Stmt>
                        <Stmt kind="Assign" name="buf_y">
                            <Expr kind="Var" name="buf_y_next"/>
                        </Stmt>
                        <Stmt kind="Assign" name="buf_seq">
                            <Expr kind="Var" name="buf_seq_next"/>
                        </Stmt>
                        <Stmt kind="Assign" name="buf_seq_next">
                            <Expr kind="List">
                                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                            </Expr>
                        </Stmt>
                        <Stmt kind="Assign" name="buf_x_next">
                            <Expr kind="Var" name="x"/>
                        </Stmt>
                        <Stmt kind="Assign" name="buf_y_next">
                            <Expr kind="Var" name="y"/>
                        </Stmt>
                    </Stmt>
                </Stmt>
                <Stmt kind="If">
                    <Expr kind="BinOpSeq">
                        <Expr kind="Var" name="type"/>
                        <Op name="&lt;"/>
                        <Expr kind="Literal" literal-kind="Integer" value="0"/>
                    </Expr>
                    <Stmt kind="Block">
                        <Stmt kind="Assign" name="buf_eof">
                            <Expr kind="Literal" literal-kind="Integer" value="1"/>
                        </Stmt>
                    </Stmt>
                    <Stmt kind="Block">
                        <Stmt kind="Call">
                            <Expr kind="Entry" name="set">
                                <Expr kind="Var" name="buf_seq_next"/>
                            </Expr>
                            <Args>
                                <Expr kind="Var" name="n"/>
                                <Expr kind="Var" name="buf_count"/>
                            </Args>
                        </Stmt>
                    </Stmt>
                </Stmt>
            </Stmt>
        </Stmt>
    </Action>
    <Action text-begin-line="137" text-begin-col="15" text-end-line="156" text-end-col="3">
        <QID name="predict.b0">
            <ID name="predict"/>
            <ID name="b0"/>
        </QID>
        <Output port="A">
            <Expr kind="Var" name="a"/>
        </Output>
        <Output port="B">
            <Expr kind="Var" name="b"/>
        </Output>
        <Output port="C">
            <Expr kind="Var" name="c"/>
        </Output>
        <Guards>
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="this_n"/>
                <Op name="="/>
                <Expr kind="Literal" literal-kind="Integer" value="0"/>
                <Op name="and"/>
                <Expr kind="BinOpSeq">
                    <Expr kind="Var" name="buf_eof"/>
                    <Op name="="/>
                    <Expr kind="Literal" literal-kind="Integer" value="1"/>
                    <Op name="or"/>
                    <Expr kind="UnaryOp">
                        <Op name="not"/>
                        <Expr kind="Application">
                            <Expr kind="Var" name="keep_reading_buf"/>
                            <Args>
                                <Expr kind="Var" name="buf_x_next"/>
                                <Expr kind="Var" name="buf_y_next"/>
                                <Expr kind="Var" name="buf_x"/>
                                <Expr kind="Var" name="buf_y"/>
                                <Expr kind="Var" name="mb_x"/>
                                <Expr kind="Var" name="mb_y"/>
                            </Args>
                        </Expr>
                    </Expr>
                </Expr>
            </Expr>
        </Guards>
        <Decl kind="Variable" name="a">
            <Type name="int"/>
            <Expr kind="Literal" literal-kind="Integer" value="0"/>
        </Decl>
        <Decl kind="Variable" name="b">
            <Type name="int"/>
            <Expr kind="Literal" literal-kind="Integer" value="0"/>
        </Decl>
        <Decl kind="Variable" name="c">
            <Type name="int"/>
            <Expr kind="Literal" literal-kind="Integer" value="0"/>
        </Decl>
        <Stmt kind="If">
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="mb_x_last"/>
                <Op name="="/>
                <Expr kind="BinOpSeq">
                    <Expr kind="Var" name="mb_x"/>
                    <Op name="-"/>
                    <Expr kind="Literal" literal-kind="Integer" value="1"/>
                </Expr>
                <Op name="and"/>
                <Expr kind="Var" name="mb_y_last"/>
                <Op name="="/>
                <Expr kind="Var" name="mb_y"/>
            </Expr>
            <Stmt kind="Block">
                <Stmt kind="Assign" name="a">
                    <Expr kind="Application">
                        <Expr kind="Entry" name="get">
                            <Expr kind="Var" name="mb_seq_last"/>
                        </Expr>
                        <Args>
                            <Expr kind="Literal" literal-kind="Integer" value="1"/>
                        </Args>
                    </Expr>
                </Stmt>
            </Stmt>
        </Stmt>
        <Stmt kind="If">
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="buf_x_last"/>
                <Op name="="/>
                <Expr kind="BinOpSeq">
                    <Expr kind="Var" name="mb_x"/>
                    <Op name="-"/>
                    <Expr kind="Literal" literal-kind="Integer" value="1"/>
                </Expr>
                <Op name="and"/>
                <Expr kind="Var" name="buf_y_last"/>
                <Op name="="/>
                <Expr kind="BinOpSeq">
                    <Expr kind="Var" name="mb_y"/>
                    <Op name="-"/>
                    <Expr kind="Literal" literal-kind="Integer" value="1"/>
                </Expr>
            </Expr>
            <Stmt kind="Block">
                <Stmt kind="Assign" name="b">
                    <Expr kind="Application">
                        <Expr kind="Entry" name="get">
                            <Expr kind="Var" name="buf_seq_last"/>
                        </Expr>
                        <Args>
                            <Expr kind="Literal" literal-kind="Integer" value="3"/>
                        </Args>
                    </Expr>
                </Stmt>
            </Stmt>
        </Stmt>
        <Stmt kind="If">
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="buf_x"/>
                <Op name="="/>
                <Expr kind="Var" name="mb_x"/>
                <Op name="and"/>
                <Expr kind="Var" name="buf_y"/>
                <Op name="="/>
                <Expr kind="BinOpSeq">
                    <Expr kind="Var" name="mb_y"/>
                    <Op name="-"/>
                    <Expr kind="Literal" literal-kind="Integer" value="1"/>
                </Expr>
            </Expr>
            <Stmt kind="Block">
                <Stmt kind="Assign" name="c">
                    <Expr kind="Application">
                        <Expr kind="Entry" name="get">
                            <Expr kind="Var" name="buf_seq"/>
                        </Expr>
                        <Args>
                            <Expr kind="Literal" literal-kind="Integer" value="2"/>
                        </Args>
                    </Expr>
                </Stmt>
            </Stmt>
        </Stmt>
    </Action>
    <Action text-begin-line="158" text-begin-col="15" text-end-line="172" text-end-col="3">
        <QID name="predict.b1">
            <ID name="predict"/>
            <ID name="b1"/>
        </QID>
        <Output port="A">
            <Expr kind="Var" name="a"/>
        </Output>
        <Output port="B">
            <Expr kind="Var" name="b"/>
        </Output>
        <Output port="C">
            <Expr kind="Var" name="c"/>
        </Output>
        <Guards>
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="this_n"/>
                <Op name="="/>
                <Expr kind="Literal" literal-kind="Integer" value="1"/>
                <Op name="and"/>
                <Expr kind="BinOpSeq">
                    <Expr kind="Var" name="buf_eof"/>
                    <Op name="="/>
                    <Expr kind="Literal" literal-kind="Integer" value="1"/>
                    <Op name="or"/>
                    <Expr kind="UnaryOp">
                        <Op name="not"/>
                        <Expr kind="Application">
                            <Expr kind="Var" name="keep_reading_buf"/>
                            <Args>
                                <Expr kind="Var" name="buf_x_next"/>
                                <Expr kind="Var" name="buf_y_next"/>
                                <Expr kind="Var" name="buf_x"/>
                                <Expr kind="Var" name="buf_y"/>
                                <Expr kind="Var" name="mb_x"/>
                                <Expr kind="Var" name="mb_y"/>
                            </Args>
                        </Expr>
                    </Expr>
                </Expr>
            </Expr>
        </Guards>
        <Decl kind="Variable" name="a">
            <Type name="int"/>
            <Expr kind="Application">
                <Expr kind="Entry" name="get">
                    <Expr kind="Var" name="mb_seq"/>
                </Expr>
                <Args>
                    <Expr kind="Literal" literal-kind="Integer" value="0"/>
                </Args>
            </Expr>
        </Decl>
        <Decl kind="Variable" name="b">
            <Type name="int"/>
            <Expr kind="Literal" literal-kind="Integer" value="0"/>
        </Decl>
        <Decl kind="Variable" name="c">
            <Type name="int"/>
            <Expr kind="Literal" literal-kind="Integer" value="0"/>
        </Decl>
        <Stmt kind="If">
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="buf_x"/>
                <Op name="="/>
                <Expr kind="Var" name="mb_x"/>
                <Op name="and"/>
                <Expr kind="Var" name="buf_y"/>
                <Op name="="/>
                <Expr kind="BinOpSeq">
                    <Expr kind="Var" name="mb_y"/>
                    <Op name="-"/>
                    <Expr kind="Literal" literal-kind="Integer" value="1"/>
                </Expr>
            </Expr>
            <Stmt kind="Block">
                <Stmt kind="Assign" name="b">
                    <Expr kind="Application">
                        <Expr kind="Entry" name="get">
                            <Expr kind="Var" name="buf_seq"/>
                        </Expr>
                        <Args>
                            <Expr kind="Literal" literal-kind="Integer" value="2"/>
                        </Args>
                    </Expr>
                </Stmt>
                <Stmt kind="Assign" name="c">
                    <Expr kind="Application">
                        <Expr kind="Entry" name="get">
                            <Expr kind="Var" name="buf_seq"/>
                        </Expr>
                        <Args>
                            <Expr kind="Literal" literal-kind="Integer" value="3"/>
                        </Args>
                    </Expr>
                </Stmt>
            </Stmt>
        </Stmt>
    </Action>
    <Action text-begin-line="174" text-begin-col="15" text-end-line="188" text-end-col="3">
        <QID name="predict.b2">
            <ID name="predict"/>
            <ID name="b2"/>
        </QID>
        <Output port="A">
            <Expr kind="Var" name="a"/>
        </Output>
        <Output port="B">
            <Expr kind="Var" name="b"/>
        </Output>
        <Output port="C">
            <Expr kind="Var" name="c"/>
        </Output>
        <Guards>
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="this_n"/>
                <Op name="="/>
                <Expr kind="Literal" literal-kind="Integer" value="2"/>
                <Op name="and"/>
                <Expr kind="BinOpSeq">
                    <Expr kind="Var" name="buf_eof"/>
                    <Op name="="/>
                    <Expr kind="Literal" literal-kind="Integer" value="1"/>
                    <Op name="or"/>
                    <Expr kind="UnaryOp">
                        <Op name="not"/>
                        <Expr kind="Application">
                            <Expr kind="Var" name="keep_reading_buf"/>
                            <Args>
                                <Expr kind="Var" name="buf_x_next"/>
                                <Expr kind="Var" name="buf_y_next"/>
                                <Expr kind="Var" name="buf_x"/>
                                <Expr kind="Var" name="buf_y"/>
                                <Expr kind="Var" name="mb_x"/>
                                <Expr kind="Var" name="mb_y"/>
                            </Args>
                        </Expr>
                    </Expr>
                </Expr>
            </Expr>
        </Guards>
        <Decl kind="Variable" name="a">
            <Type name="int"/>
            <Expr kind="Literal" literal-kind="Integer" value="0"/>
        </Decl>
        <Decl kind="Variable" name="b">
            <Type name="int"/>
            <Expr kind="Literal" literal-kind="Integer" value="0"/>
        </Decl>
        <Decl kind="Variable" name="c">
            <Type name="int"/>
            <Expr kind="Application">
                <Expr kind="Entry" name="get">
                    <Expr kind="Var" name="mb_seq"/>
                </Expr>
                <Args>
                    <Expr kind="Literal" literal-kind="Integer" value="0"/>
                </Args>
            </Expr>
        </Decl>
        <Stmt kind="If">
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="mb_x_last"/>
                <Op name="="/>
                <Expr kind="BinOpSeq">
                    <Expr kind="Var" name="mb_x"/>
                    <Op name="-"/>
                    <Expr kind="Literal" literal-kind="Integer" value="1"/>
                </Expr>
                <Op name="and"/>
                <Expr kind="Var" name="mb_y_last"/>
                <Op name="="/>
                <Expr kind="Var" name="mb_y"/>
            </Expr>
            <Stmt kind="Block">
                <Stmt kind="Assign" name="a">
                    <Expr kind="Application">
                        <Expr kind="Entry" name="get">
                            <Expr kind="Var" name="mb_seq_last"/>
                        </Expr>
                        <Args>
                            <Expr kind="Literal" literal-kind="Integer" value="3"/>
                        </Args>
                    </Expr>
                </Stmt>
                <Stmt kind="Assign" name="b">
                    <Expr kind="Application">
                        <Expr kind="Entry" name="get">
                            <Expr kind="Var" name="mb_seq_last"/>
                        </Expr>
                        <Args>
                            <Expr kind="Literal" literal-kind="Integer" value="1"/>
                        </Args>
                    </Expr>
                </Stmt>
            </Stmt>
        </Stmt>
    </Action>
    <Action text-begin-line="190" text-begin-col="15" text-end-line="200" text-end-col="3">
        <QID name="predict.b3">
            <ID name="predict"/>
            <ID name="b3"/>
        </QID>
        <Output port="A">
            <Expr kind="Var" name="a"/>
        </Output>
        <Output port="B">
            <Expr kind="Var" name="b"/>
        </Output>
        <Output port="C">
            <Expr kind="Var" name="c"/>
        </Output>
        <Guards>
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="this_n"/>
                <Op name="="/>
                <Expr kind="Literal" literal-kind="Integer" value="3"/>
                <Op name="and"/>
                <Expr kind="BinOpSeq">
                    <Expr kind="Var" name="buf_eof"/>
                    <Op name="="/>
                    <Expr kind="Literal" literal-kind="Integer" value="1"/>
                    <Op name="or"/>
                    <Expr kind="UnaryOp">
                        <Op name="not"/>
                        <Expr kind="Application">
                            <Expr kind="Var" name="keep_reading_buf"/>
                            <Args>
                                <Expr kind="Var" name="buf_x_next"/>
                                <Expr kind="Var" name="buf_y_next"/>
                                <Expr kind="Var" name="buf_x"/>
                                <Expr kind="Var" name="buf_y"/>
                                <Expr kind="Var" name="mb_x"/>
                                <Expr kind="Var" name="mb_y"/>
                            </Args>
                        </Expr>
                    </Expr>
                </Expr>
            </Expr>
        </Guards>
        <Decl kind="Variable" name="a">
            <Type name="int"/>
            <Expr kind="Application">
                <Expr kind="Entry" name="get">
                    <Expr kind="Var" name="mb_seq"/>
                </Expr>
                <Args>
                    <Expr kind="Literal" literal-kind="Integer" value="2"/>
                </Args>
            </Expr>
        </Decl>
        <Decl kind="Variable" name="b">
            <Type name="int"/>
            <Expr kind="Application">
                <Expr kind="Entry" name="get">
                    <Expr kind="Var" name="mb_seq"/>
                </Expr>
                <Args>
                    <Expr kind="Literal" literal-kind="Integer" value="0"/>
                </Args>
            </Expr>
        </Decl>
        <Decl kind="Variable" name="c">
            <Type name="int"/>
            <Expr kind="Application">
                <Expr kind="Entry" name="get">
                    <Expr kind="Var" name="mb_seq"/>
                </Expr>
                <Args>
                    <Expr kind="Literal" literal-kind="Integer" value="1"/>
                </Args>
            </Expr>
        </Decl>
    </Action>
    <Action text-begin-line="202" text-begin-col="16" text-end-line="221" text-end-col="3">
        <QID name="predict.b45">
            <ID name="predict"/>
            <ID name="b45"/>
        </QID>
        <Output port="A">
            <Expr kind="Var" name="a"/>
        </Output>
        <Output port="B">
            <Expr kind="Var" name="b"/>
        </Output>
        <Output port="C">
            <Expr kind="Var" name="c"/>
        </Output>
        <Guards>
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="this_n"/>
                <Op name="&gt;"/>
                <Expr kind="Literal" literal-kind="Integer" value="3"/>
                <Op name="and"/>
                <Expr kind="BinOpSeq">
                    <Expr kind="Var" name="buf_eof"/>
                    <Op name="="/>
                    <Expr kind="Literal" literal-kind="Integer" value="1"/>
                    <Op name="or"/>
                    <Expr kind="UnaryOp">
                        <Op name="not"/>
                        <Expr kind="Application">
                            <Expr kind="Var" name="keep_reading_buf"/>
                            <Args>
                                <Expr kind="Var" name="buf_x_next"/>
                                <Expr kind="Var" name="buf_y_next"/>
                                <Expr kind="Var" name="buf_x"/>
                                <Expr kind="Var" name="buf_y"/>
                                <Expr kind="Var" name="mb_x"/>
                                <Expr kind="Var" name="mb_y"/>
                            </Args>
                        </Expr>
                    </Expr>
                </Expr>
            </Expr>
        </Guards>
        <Decl kind="Variable" name="a">
            <Type name="int"/>
            <Expr kind="Literal" literal-kind="Integer" value="0"/>
        </Decl>
        <Decl kind="Variable" name="b">
            <Type name="int"/>
            <Expr kind="Literal" literal-kind="Integer" value="0"/>
        </Decl>
        <Decl kind="Variable" name="c">
            <Type name="int"/>
            <Expr kind="Literal" literal-kind="Integer" value="0"/>
        </Decl>
        <Stmt kind="If">
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="mb_x_last"/>
                <Op name="="/>
                <Expr kind="BinOpSeq">
                    <Expr kind="Var" name="mb_x"/>
                    <Op name="-"/>
                    <Expr kind="Literal" literal-kind="Integer" value="1"/>
                </Expr>
                <Op name="and"/>
                <Expr kind="Var" name="mb_y_last"/>
                <Op name="="/>
                <Expr kind="Var" name="mb_y"/>
            </Expr>
            <Stmt kind="Block">
                <Stmt kind="Assign" name="a">
                    <Expr kind="Application">
                        <Expr kind="Entry" name="get">
                            <Expr kind="Var" name="mb_seq_last"/>
                        </Expr>
                        <Args>
                            <Expr kind="Var" name="this_n"/>
                        </Args>
                    </Expr>
                </Stmt>
            </Stmt>
        </Stmt>
        <Stmt kind="If">
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="buf_x_last"/>
                <Op name="="/>
                <Expr kind="BinOpSeq">
                    <Expr kind="Var" name="mb_x"/>
                    <Op name="-"/>
                    <Expr kind="Literal" literal-kind="Integer" value="1"/>
                </Expr>
                <Op name="and"/>
                <Expr kind="Var" name="buf_y_last"/>
                <Op name="="/>
                <Expr kind="BinOpSeq">
                    <Expr kind="Var" name="mb_y"/>
                    <Op name="-"/>
                    <Expr kind="Literal" literal-kind="Integer" value="1"/>
                </Expr>
            </Expr>
            <Stmt kind="Block">
                <Stmt kind="Assign" name="b">
                    <Expr kind="Application">
                        <Expr kind="Entry" name="get">
                            <Expr kind="Var" name="buf_seq_last"/>
                        </Expr>
                        <Args>
                            <Expr kind="Var" name="this_n"/>
                        </Args>
                    </Expr>
                </Stmt>
            </Stmt>
        </Stmt>
        <Stmt kind="If">
            <Expr kind="BinOpSeq">
                <Expr kind="Var" name="buf_x"/>
                <Op name="="/>
                <Expr kind="Var" name="mb_x"/>
                <Op name="and"/>
                <Expr kind="Var" name="buf_y"/>
                <Op name="="/>
                <Expr kind="BinOpSeq">
                    <Expr kind="Var" name="mb_y"/>
                    <Op name="-"/>
                    <Expr kind="Literal" literal-kind="Integer" value="1"/>
                </Expr>
            </Expr>
            <Stmt kind="Block">
                <Stmt kind="Assign" name="c">
                    <Expr kind="Application">
                        <Expr kind="Entry" name="get">
                            <Expr kind="Var" name="buf_seq"/>
                        </Expr>
                        <Args>
                            <Expr kind="Var" name="this_n"/>
                        </Args>
                    </Expr>
                </Stmt>
            </Stmt>
        </Stmt>
    </Action>
    <Schedule kind="fsm" initial-state="read">
        <Transition from="reset" to="reset">
            <ActionTags>
                <QID name="flush_buf">
                    <ID name="flush_buf"/>
                </QID>
            </ActionTags>
        </Transition>
        <Transition from="reset" to="read">
            <ActionTags>
                <QID name="reset_actor">
                    <ID name="reset_actor"/>
                </QID>
            </ActionTags>
        </Transition>
        <Transition from="read" to="reset">
            <ActionTags>
                <QID name="eof_detect">
                    <ID name="eof_detect"/>
                </QID>
            </ActionTags>
        </Transition>
        <Transition from="read" to="read">
            <ActionTags>
                <QID name="discard_block">
                    <ID name="discard_block"/>
                </QID>
            </ActionTags>
        </Transition>
        <Transition from="read" to="process">
            <ActionTags>
                <QID name="read_block">
                    <ID name="read_block"/>
                </QID>
            </ActionTags>
        </Transition>
        <Transition from="process" to="read">
            <ActionTags>
                <QID name="predict">
                    <ID name="predict"/>
                </QID>
            </ActionTags>
        </Transition>
        <Transition from="process" to="process">
            <ActionTags>
                <QID name="read_buf">
                    <ID name="read_buf"/>
                </QID>
            </ActionTags>
        </Transition>
    </Schedule>
</Actor>
