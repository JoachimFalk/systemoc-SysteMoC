
#include <callib.hpp>

class m_byte2bit: public smoc_actor {
// The actor has 2 Ports.
public: 
   smoc_port_in<int> in8;
   smoc_port_out<int> out;

// The actor has 0 Parameters and 0 Variable declarations.

// The actor has 1 Actions and 0 Guards.
private:
void m_byte2bit::action(void) {
// The action has 8 local variable declarations.
   int i = in8[0];
   int b7 = bitxor(rshift(i, 7), 1);
   int b6 = bitxor(rshift(i, 6), 1);
   int b5 = bitxor(rshift(i, 5), 1);
   int b4 = bitxor(rshift(i, 4), 1);
   int b3 = bitxor(rshift(i, 3), 1);
   int b2 = bitxor(rshift(i, 2), 1);
   int b1 = bitxor(rshift(i, 1), 1);
   int b0 = bitxor(i, 1);
   out[0] = b7;
   out[1] = b6;
   out[2] = b5;
   out[3] = b4;
   out[4] = b3;
   out[5] = b2;
   out[6] = b1;
   out[7] = b0;
}

   smoc_firing_state start;
      
public:
 m_byte2bit(sc_module_name name)
 : smoc_actor(name, start) {
 start = 
   (in8.getAvailableTokens() >= 1) >> 
   (out.getAvailableSpace() >= 8)  >>
   call(&m_byte2bit::action) >> start;  
 }
};
